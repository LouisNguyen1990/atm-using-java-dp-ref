package atm.screen;

import java.awt.CardLayout;
import java.awt.Component;
import java.util.HashMap;
import javax.swing.JPanel;

public class Screen extends JPanel {
	
	/** screenMap - stores screens **/
	private HashMap<String, ScreenType> screenMap = new HashMap<String, ScreenType>();
	
	/** screenType - current screen **/
	private ScreenType screenType;
	
	/** constructor **/
	public Screen() {
		initComponents();
	}
	
	private void initComponents() {
		setLayout(new CardLayout());
		
		add(ScreenType.getWelcomeScreen(), ScreenType.WELCOME);
		add(ScreenType.getLoginScreen(), ScreenType.LOGIN_MENU);
		add(ScreenType.getMainMenuScreen(), ScreenType.MAIN_MENU);
		add(ScreenType.getWithdrawScreen(), ScreenType.WITHDRAW_MENU);
		add(ScreenType.getBalanceInquiryScreen(), ScreenType.VIEW_BALANCE);
		add(ScreenType.getTransferScreen1(), ScreenType.TRANSFER1);
		add(ScreenType.getTransferScreen2(), ScreenType.TRANSFER2);
		add(ScreenType.getChangePINScreen(), ScreenType.CHANGE_PIN);
	}
	
	public void setScreenType(ScreenType screen) {
		screenType = screen;
	}
	
	public ScreenType getScreenType() {
		return screenType;
	}
	
	/** Hiển thị screen **/
	public void showScreen(String name) {
		CardLayout layout = (CardLayout) getLayout();
		layout.show(this, name);
		
		//set screen type - store current screen
		setScreenType(screenMap.get(name));
	}
	
	public void printMessage(String msg, int posIndex) {
		getScreenType().printMessage(msg, posIndex);
	}
	
	public void displayInput(String msg) {
		getScreenType().displayInput(msg);
	}
	
	public void clearDisplay() {
		getScreenType().clearDisplay();
	}
	
	@Override
	public void add(Component comp, Object constraints) {
		screenMap.put((String) constraints, (ScreenType) comp);
		super.add(comp, constraints);
	}
}